<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student management</title>
    <style>
        table, th, td { border: 1px solid black; border-collapse: collapse; }
    th, td { padding: 8px; }
    form { margin-bottom: 20px; }
    </style>
</head>
<body>
    <h2>Student management</h2>

    <form id="studentform">
        <label>Name</label>
        <input type="text" id="name" required>

        <label >Age</label>
        <input type="number" id="age" required>

        <label>Department</label>
        <select id="department">
            <option value="">Select</option>
            <option value="python">python</option>
            <option value="mern">mern</option>
            <option value="network">network</option>
        </select>

        <button type="submit" id="saveBtn">add student</button>
    </form>

    <label>Filter by Department</label>
    <select id="filterDept">
        <option value="all">All</option>
        <option value="python">Python</option>
        <option value="mern">Mern</option>
        <option value="network">Network</option>
    </select>

    <table border="1">
        <thead>
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Age</th>
                <th>Dept</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="studentsTable"></tbody>
    </table>

    <script>
        let students = [];
        let editId = null;

        document.getElementById('studentform').addEventListener('submit', handleSubmit);
        document.getElementById('filterDept').addEventListener('change', renderTable);

        function handleSubmit(e){
            e.preventDefault();

            const name = document.getElementById('name').value;
            const age = document.getElementById('age').value;
            const department = document.getElementById('department').value;

            if (editId !== null){
                students = students.map(s => s.id === editId ? {id: s.id, name, age, department } : s);
                editId = null ;
                document.getElementById('saveBtn').textContent = "Add student";
            }
            else{
                students.push({id: Date.now(), name, age, department});
            }
            e.target.reset();
            renderTable();
        }
        function renderTable(){
            const tbody = document.getElementById('studentsTable');
            tbody.innerHTML = "";

            const filter = document.getElementById('filterDept').value;
            const filtered = filter === "all" ? students : students.filter(s => s.department === filter);

            filtered.forEach((s,index) => {
                const row = document.createElement('tr')
                row.innerHTML = `
                <td>${index + 1 }</td>
                <td>${s.name }</td>
                <td>${s.age }</td>
                <td>${s.department }</td>
                <td>
                    <button onclick ="editStudent(${s.id})">Edit</button>
                    <button onclick = "if(confirm('Delete this student?')) deleteStudent(${s.id})">Delete</button>
                </td>
                `;
                tbody.appendChild(row);
            
            });
        }

        function editStudent(id){
            const s = students.find(st => st.id === id)
            document.getElementById('name').value = s.name;
            document.getElementById('age').value = s.age;
            document.getElementById('department').value = s.department;

            editId = id;
            document.getElementById('saveBtn').textContent = "save Changes"
        }

        function deleteStudent(id){
            students = students.filter(s => s.id !== id);
            renderTable();
        }



    </script>
</body>
</html>